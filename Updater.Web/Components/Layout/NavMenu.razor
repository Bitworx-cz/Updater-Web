@using Microsoft.AspNetCore.Components.Authorization
@using System.Security.Claims
@using Microsoft.Extensions.Logging
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject ILogger<NavMenu> Logger;
@layout MainLayout

<link rel="stylesheet" href="app.css">

@code {
    private ClaimsPrincipal User;
    private bool IsAuthenticated = false;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        try
        {
            User = (await AuthenticationStateProvider.GetAuthenticationStateAsync()).User;
            IsAuthenticated = User?.Identity?.IsAuthenticated ?? false;
        }
        catch (Exception e)
        {
            Logger.LogError(e, "Failed to resolve the authenticated user");
        }
    }
}
